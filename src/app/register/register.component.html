<div class="container mt-5 d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="col-md-6">
    <div class="card shadow-lg p-4" style="margin-top: 50px;">
      <div class="card-body">
        <h3 class="text-center mb-4 text-primary">Inscription</h3>

        <!-- Message d'erreur -->
        <div class="alert alert-danger" *ngIf="err">
          <strong>{{ err }}</strong>
        </div>

        <!-- Formulaire -->
        <form [formGroup]="myForm">
          <!-- Prénom -->
          <div class="form-group mb-3">
            <label for="username" class="form-label">Nom d'utilisateur :</label>
            <input id="username" type="text" name="username" class="form-control"
              formControlName="username" [(ngModel)]="user.username" placeholder="Entrez votre nom d'utilisateur" required>
            <small *ngIf="myForm.controls['username'].hasError('required') && myForm.controls['username'].touched" class="text-danger">
              Nom d'utilisateur est obligatoire
            </small>
          </div>
          <div class="form-group mb-3">
            <label for="prenom" class="form-label">Prénom :</label>
            <input id="prenom" type="text" name="prenom" class="form-control"
              formControlName="prenom" [(ngModel)]="user.prenom" placeholder="Entrez votre prénom" required>
            <small *ngIf="myForm.controls['prenom'].hasError('required') && myForm.controls['prenom'].touched" class="text-danger">
              Le prénom est obligatoire
            </small>
          </div>

          <!-- Adresse -->
          <div class="form-group mb-3">
            <label for="adress" class="form-label">Adresse :</label>
            <input id="adress" type="text" name="adress" class="form-control"
              formControlName="adress" [(ngModel)]="user.adress" placeholder="Entrez votre adresse" required>
            <small *ngIf="myForm.controls['adress'].hasError('required') && myForm.controls['adress'].touched" class="text-danger">
              L'adresse est obligatoire
            </small>
          </div>

          <!-- Téléphone -->
          <div class="form-group mb-3">
            <label for="tel" class="form-label">Téléphone :</label>
            <input id="tel" type="text" name="tel" class="form-control"
              formControlName="tel" [(ngModel)]="user.tel" placeholder="Entrez votre numéro de téléphone" required>
            <small *ngIf="myForm.controls['tel'].hasError('required') && myForm.controls['tel'].touched" class="text-danger">
              Le téléphone est obligatoire
            </small>
          </div>

          <!-- SIRET -->
          <div class="form-group mb-3">
            <label for="siret" class="form-label">SIRET :</label>
            <input id="siret" type="text" name="siret" class="form-control"
              formControlName="siret" [(ngModel)]="user.siret" placeholder="Entrez votre SIRET" required>
            <small *ngIf="myForm.controls['siret'].hasError('required') && myForm.controls['siret'].touched" class="text-danger">
              Le SIRET est obligatoire
            </small>
          </div>

          <!-- Liste déroulante pour le rôle -->
          <div class="form-group mb-3">
            <label for="role" class="form-label">Rôle :</label>
            <select id="role" name="role" class="form-control" formControlName="role">
              <option value="">Sélectionnez un rôle</option>
              <option value="CLIENT">Client</option>
              <option value="PRESTATAIRE">Prestataire</option>
            </select>
            <small *ngIf="myForm.controls['role'].hasError('required') && myForm.controls['role'].touched" class="text-danger">
              Le rôle est obligatoire
            </small>
          </div>

          <!-- Nom d'utilisateur -->
          

          <!-- Email -->
          <div class="form-group mb-3">
            <label for="email" class="form-label">Email :</label>
            <input id="email" type="email" name="email" class="form-control"
              formControlName="email" [(ngModel)]="user.email" placeholder="Entrez votre email" required>
            <small *ngIf="myForm.controls['email'].hasError('required') && myForm.controls['email'].touched" class="text-danger">
              Email est obligatoire
            </small>
            <small *ngIf="myForm.controls['email'].hasError('email') && myForm.controls['email'].touched" class="text-danger">
              Email non valide
            </small>
          </div>

          <!-- Mot de passe -->
          <div class="form-group mb-3">
            <label for="password" class="form-label">Mot de passe :</label>
            <input id="password" type="password" name="password" class="form-control"
              formControlName="password" [(ngModel)]="user.password" placeholder="Entrez votre mot de passe" required>
            <small *ngIf="myForm.controls['password'].hasError('required') && myForm.controls['password'].touched" class="text-danger">
              Mot de passe est obligatoire
            </small>
            <small *ngIf="myForm.controls['password'].hasError('minlength') && myForm.controls['password'].touched" class="text-danger">
              Mot de passe doit contenir au moins 6 caractères
            </small>
          </div>

          <!-- Confirmer mot de passe -->
          <div class="form-group mb-4">
            <label for="confirmPassword" class="form-label">Confirmer mot de passe :</label>
            <input id="confirmPassword" type="password" name="confirmPassword" class="form-control"
              formControlName="confirmPassword" placeholder="Confirmer votre mot de passe" required>
            <small *ngIf="myForm.controls['confirmPassword'].hasError('required') && myForm.controls['confirmPassword'].touched" class="text-danger">
              Confirmer mot de passe est obligatoire
            </small>
            <small *ngIf="myForm.get('confirmPassword')?.touched && myForm.get('confirmPassword')?.value !== myForm.get('password')?.value" class="text-danger">
              Les mots de passe ne correspondent pas
            </small>
          </div>

          <!-- Bouton d'inscription -->
          <div class="d-grid mb-3">
            <button type="button" [disabled]="myForm.invalid" class="btn btn-primary btn-lg" (click)="onRegister()">
              S'inscrire
            </button>
          </div>

          <!-- Lien vers la connexion -->
          <p class="text-center">
            Vous avez déjà un compte ? 
            <a routerLink="/login" class="text-decoration-none text-primary fw-bold">Se connecter</a>
          </p>
        </form>
      </div>
    </div>
  </div>
</div>
